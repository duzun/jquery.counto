/** X-Number class: read/write formated numbers
 *  @author Dumitru Uzun (DUzun.Me)
 *  @version 1.0.0
 */
function xNumber(g,f,h,a){a||(a={});if(this instanceof xNumber)null==f&&(f=!0),null==h&&(h=!0),this.value=g=this.parseFloat(g,f,h,a),this.prec=a.prec,this.term=a.term;else{var b=xNumber.prototype;g=b.parseFloat.call(a,g,f,h,a);return h||f||0===f?b.toString.call(a,g):g}}
!function(g,f){function h(a){!0===a||null==a?a=!1:!1!==a&&(a=parseInt(a)||0);return a}f=g.prototype;f.constructor=g;f.prec=!1;f.term="";f.value=0;f.valueOf=function(){return this.value};f.toString=function(a){var b=this.term,c=h(this.prec);a=null!=a?a:this.value;a instanceof Number||(a=f.parseFloat(a,!1,b));if(b||!1!==c){a=String(a).split(".",2);var d=a[0],e;a=a[1]||"";if(!1!==c){if(e=0>c)c=-c;0<=c&&(c<a.length?(e=Math.ceil(-.5-("."+a.substr(c))),a=a.substr(0,c),e&&(c?a=+a+1+"":d=+d+1+"")):a.length<
c&&!e&&(a+=Array(c-a.length+1).join("0")))}if(b){d=d.split("");for(e=d.splice(0,d.length%3||3).join("");d.length;)e+=b+d.splice(0,3).join("");d=e}""!=a&&(d+="."+a);a=d}else a=String(a);return a};g.parseFloat=f.parseFloat=function(a,b,c,d){if(a instanceof xNumber)return d&&(d.prec=a.prec,d.term=a.term,d.value=a.value),a.value;if(null==a)return NaN;a=a.valueOf();if(null==a)return NaN;a.constructor!=Number&&(a=String(a));if(a.constructor==String){var e;0<a.indexOf(e="`")||0<a.indexOf(e="'")||0<a.indexOf(e=
" ")||(e="");c?!0===c?c=e:" "!=c&&(a=a.replace(i=new RegExp("["+escape(c).replace(/%/g,"\\x")+"]","g"),"")):c="";a=a.replace(/[\s\x27\x60]+/g,"").match(/[-+]*([0-9,]*[\.]?[0-9]*)/)[1].replace(/,/g,0>(i=a.indexOf("."))?".":"");e=0>(i=a.indexOf("."))?0:a.length-i-1;b=!0===b?e:h(b);!1!==b&&0<=i&&(0>b?e>-b&&(a=a.substr(0,i-b+1)):a=a.substr(0,i+b+(0<b)));a=parseFloat(a)}else b=h(b);a.constructor!=Number&&(a=parseFloat(a));!1!==b&&(a=+a.toFixed(0>b?-b:+b));d&&(d.prec=b,d.term=!0!==c&&c?String(c):"",d.value=
a);return a}}(xNumber);